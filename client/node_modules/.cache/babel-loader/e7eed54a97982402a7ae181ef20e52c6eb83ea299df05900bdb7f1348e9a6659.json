{"ast":null,"code":"var _jsxFileName = \"/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/src/User/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { StateContext } from '../context';\nimport { useContext } from 'react';\nimport { useResource } from 'react-request-hook';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const [username, setUsername] = useState('');\n  const {\n    dispatch\n  } = useContext(StateContext);\n  const [loginFailed, setLoginFailed] = useState(false);\n  const [password, setPassword] = useState('');\n  function handleUsername(evt) {\n    setUsername(evt.target.value);\n  }\n  function handlePassword(evt) {\n    setPassword(evt.target.value);\n  }\n  const [user, login] = useResource((username, password) => ({\n    url: \"/login\",\n    method: \"post\",\n    data: {\n      email: username,\n      password\n    }\n  }));\n  useEffect(() => {\n    if (user) {\n      var _user$data;\n      if (user !== null && user !== void 0 && (_user$data = user.data) !== null && _user$data !== void 0 && _user$data.user) {\n        setLoginFailed(false);\n        dispatch({\n          type: \"LOGIN\",\n          username: user.data.user.email\n        });\n      } else {\n        setLoginFailed(true);\n      }\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n        login(username, password);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"login-username\",\n        children: \"Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: username,\n        onChange: handleUsername,\n        name: \"login-username\",\n        id: \"login-username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"login-password\",\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: password,\n        onChange: handlePassword,\n        name: \"login-password\",\n        id: \"login-password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Login\",\n        disabled: username.length === 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"9cE9WHd7/cbiVZIBJpwhEd2PlW4=\", false, function () {\n  return [useResource];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","StateContext","useContext","useResource","jsxDEV","_jsxDEV","Login","_s","username","setUsername","dispatch","loginFailed","setLoginFailed","password","setPassword","handleUsername","evt","target","value","handlePassword","user","login","url","method","data","email","_user$data","type","children","onSubmit","e","preventDefault","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","onChange","name","id","disabled","length","_c","$RefreshReg$"],"sources":["/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/src/User/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { StateContext } from '../context'\nimport { useContext } from 'react'\nimport { useResource } from 'react-request-hook'\n\nexport default function Login() {\n    const [ username, setUsername ] = useState('')\n    const {dispatch} = useContext(StateContext);\n    const [ loginFailed, setLoginFailed ] = useState(false)\n    const [ password, setPassword ] = useState('')\n\n    function handleUsername (evt) { setUsername(evt.target.value) }\n    function handlePassword (evt) { setPassword(evt.target.value)}\n\n    const [user, login] = useResource((username, password) => ({\n        url: \"/login\",\n        method: \"post\",\n        data: { email: username, password },\n        }));\n\n    useEffect(() => {\n        if (user) {\n        if (user?.data?.user) {\n        setLoginFailed(false);\n        dispatch({ type: \"LOGIN\", username: user.data.user.email });\n        } else {\n        setLoginFailed(true);\n        }\n        }\n        }, [user]);\n\n    return (\n        <div>\n        \n        <form onSubmit={e => { e.preventDefault(); \n            login(username,password);\n            }}>\n        <label htmlFor=\"login-username\">Username:</label>\n        <input type=\"text\" value={username} onChange={handleUsername} name=\"login-username\" id=\"login-username\" />\n        <label htmlFor=\"login-password\">Password:</label>\n        <input type=\"password\" value={password} onChange={handlePassword} name=\"login-password\" id=\"login-password\" />\n        <input type=\"submit\" value=\"Login\" disabled={username.length === 0} />\n        </form>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}