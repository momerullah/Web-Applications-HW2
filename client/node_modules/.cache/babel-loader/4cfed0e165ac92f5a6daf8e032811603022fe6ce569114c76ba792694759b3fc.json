{"ast":null,"code":"import _slicedToArray from\"/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useEffect}from\"react\";import{StateContext}from\"../context\";import{useResource}from\"react-request-hook\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useContext=useContext(StateContext),dispatch=_useContext.dispatch;// Updated resource hook for login action to match the backend endpoint and data structure\nvar _useResource=useResource(function(username,password){return{url:'/auth/login',method:'post',data:{username:username,password:password}};}),_useResource2=_slicedToArray(_useResource,2),user=_useResource2[0],login=_useResource2[1];// Effect hook to update state upon successful login\nuseEffect(function(){if(user!==null&&user!==void 0&&user.data){dispatch({type:\"LOGIN\",username:user.data.username,token:user.data.token});localStorage.setItem('token',user.data.token);}},[user,dispatch]);var handleSubmit=function handleSubmit(e){e.preventDefault();// No need to validate email format here if your usernames are not in email format\nlogin(username,password);};// JSX for rendering the login form\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:username,onChange:function onChange(e){return setUsername(e.target.value);},name:\"login-username\",id:\"login-username\",placeholder:\"Email\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},name:\"login-password\",id:\"login-password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-primary\",value:\"Login\"})]})})]})})})});}","map":{"version":3,"names":["React","useState","useContext","useEffect","StateContext","useResource","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useContext","dispatch","_useResource","url","method","data","_useResource2","user","login","type","token","localStorage","setItem","handleSubmit","e","preventDefault","className","children","onSubmit","value","onChange","target","name","id","placeholder"],"sources":["/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/src/User/Login.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { StateContext } from \"../context\";\nimport { useResource } from \"react-request-hook\";\n\nexport default function Login() {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const { dispatch } = useContext(StateContext);\n\n  // Updated resource hook for login action to match the backend endpoint and data structure\n  const [user, login] = useResource((username, password) => ({\n    url: '/auth/login',\n    method: 'post',\n    data: { username, password },\n  }));\n\n  // Effect hook to update state upon successful login\n  useEffect(() => {\n    if (user?.data) {\n      dispatch({\n        type: \"LOGIN\",\n        username: user.data.username,\n        token: user.data.token\n      });\n      localStorage.setItem('token', user.data.token);\n    }\n  }, [user, dispatch]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // No need to validate email format here if your usernames are not in email format\n    login(username, password);\n  };\n  \n  // JSX for rendering the login form\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"card\">\n            <div className=\"card-header\">Login</div>\n            <div className=\"card-body\">\n              <form onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    value={username}\n                    onChange={(e) => setUsername(e.target.value)}\n                    name=\"login-username\"\n                    id=\"login-username\"\n                    placeholder=\"Email\"\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    name=\"login-password\"\n                    id=\"login-password\"\n                    placeholder=\"Password\"\n                  />\n                </div>\n                <input type=\"submit\" className=\"btn btn-primary\" value=\"Login\" />\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}