{"ast":null,"code":"var _jsxFileName = \"/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/src/User/Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useResource } from 'react-request-hook';\nimport { StateContext } from '../context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction isValidEmail(email) {\n  const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/;\n  return emailRegex.test(email);\n}\nfunction isValidPassword(password) {\n  const passwordRegex = /^(?=.*[0-9])(?=.*[.])[a-zA-Z0-9!@#$%^&*]{8,}$/;\n  return passwordRegex.test(password);\n}\nexport default function Register() {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordRepeat, setPasswordRepeat] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const {\n    dispatch\n  } = useContext(StateContext);\n  const [user, register] = useResource((username, password) => ({\n    url: \"/users\",\n    method: \"post\",\n    data: {\n      email: username,\n      password\n    }\n  }));\n  useEffect(() => {\n    if (user && user.data) {\n      setSuccess(true);\n      setErrorMessage('');\n      dispatch({\n        type: \"REGISTER\",\n        username: user.data.email\n      });\n    }\n  }, [user]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!isValidEmail(username)) {\n      setErrorMessage(\"Invalid email format\");\n      return;\n    }\n    if (!isValidPassword(password)) {\n      setErrorMessage(\"Password must be at least 8 characters long, contain a number and a special character.\");\n      return;\n    }\n    if (password !== passwordRepeat) {\n      setErrorMessage(\"Passwords do not match.\");\n      return;\n    }\n    setErrorMessage('');\n    register(username, password);\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [success && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"success-message\",\n      children: \"Registration successful! Please log in.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 25\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"register-username\",\n      children: \"Username:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: username,\n      onChange: e => setUsername(e.target.value),\n      name: \"register-username\",\n      id: \"register-username\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"register-password\",\n      children: \"Password:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      name: \"register-password\",\n      id: \"register-password\",\n      value: password,\n      onChange: e => setPassword(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"register-password-repeat\",\n      children: \"Repeat password:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      name: \"register-password-repeat\",\n      id: \"register-password-repeat\",\n      value: passwordRepeat,\n      onChange: e => setPasswordRepeat(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"submit\",\n      value: \"Register\",\n      disabled: username.length === 0 || password.length === 0 || password !== passwordRepeat\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n}\n_s(Register, \"n+Yb/7FNblPx13x5Lf5xxcVBXiE=\", false, function () {\n  return [useResource];\n});\n_c = Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useResource","StateContext","jsxDEV","_jsxDEV","isValidEmail","email","emailRegex","test","isValidPassword","password","passwordRegex","Register","_s","username","setUsername","setPassword","passwordRepeat","setPasswordRepeat","success","setSuccess","errorMessage","setErrorMessage","dispatch","user","register","url","method","data","type","handleSubmit","e","preventDefault","onSubmit","children","className","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","value","onChange","target","name","id","disabled","length","_c","$RefreshReg$"],"sources":["/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/src/User/Register.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\nimport { useResource } from 'react-request-hook'\nimport { StateContext } from '../context'\n\nfunction isValidEmail(email) {\n  const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/;\n  return emailRegex.test(email);\n}\n\nfunction isValidPassword(password) {\n  const passwordRegex = /^(?=.*[0-9])(?=.*[.])[a-zA-Z0-9!@#$%^&*]{8,}$/;\n  return passwordRegex.test(password);\n}\n\nexport default function Register() {\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [passwordRepeat, setPasswordRepeat] = useState('')\n    const [success, setSuccess] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const { dispatch } = useContext(StateContext);\n\n    const [user, register] = useResource((username, password) => ({\n        url: \"/users\",\n        method: \"post\",\n        data: { email: username, password },\n    }));\n\n    useEffect(() => {\n        if (user && user.data) {\n            setSuccess(true);\n            setErrorMessage('');\n            dispatch({ type: \"REGISTER\", username: user.data.email });\n        }\n    }, [user]);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        if (!isValidEmail(username)) {\n          setErrorMessage(\"Invalid email format\");\n          return;\n        }\n        if (!isValidPassword(password)) {\n          setErrorMessage(\"Password must be at least 8 characters long, contain a number and a special character.\");\n          return;\n        }\n        if (password !== passwordRepeat) {\n          setErrorMessage(\"Passwords do not match.\");\n          return;\n        }\n        setErrorMessage('');\n        register(username, password);\n    }\n\n    return (\n        <form onSubmit={handleSubmit}>\n            {success && <p className=\"success-message\">Registration successful! Please log in.</p>}\n            {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\n            <label htmlFor=\"register-username\">Username:</label>\n            <input type=\"text\" value={username} onChange={e => setUsername(e.target.value)} name=\"register-username\" id=\"register-username\" />\n            <label htmlFor=\"register-password\">Password:</label>\n            <input type=\"password\" name=\"register-password\" id=\"register-password\" value={password}\n            onChange={e => setPassword(e.target.value)} />\n            <label htmlFor=\"register-password-repeat\">Repeat password:</label>\n            <input type=\"password\" name=\"register-password-repeat\" id=\"register-password-repeat\" value={passwordRepeat}\n            onChange={e => setPasswordRepeat(e.target.value)} />\n            <input type=\"submit\" value=\"Register\" disabled={username.length === 0 || password.length === 0 || password !== passwordRepeat} />\n        </form>\n    )\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC9D,SAASC,WAAW,QAAQ,oBAAoB;AAChD,SAASC,YAAY,QAAQ,YAAY;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEzC,SAASC,YAAYA,CAACC,KAAK,EAAE;EAC3B,MAAMC,UAAU,GAAG,iDAAiD;EACpE,OAAOA,UAAU,CAACC,IAAI,CAACF,KAAK,CAAC;AAC/B;AAEA,SAASG,eAAeA,CAACC,QAAQ,EAAE;EACjC,MAAMC,aAAa,GAAG,+CAA+C;EACrE,OAAOA,aAAa,CAACH,IAAI,CAACE,QAAQ,CAAC;AACrC;AAEA,eAAe,SAASE,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAC/B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACY,QAAQ,EAAEM,WAAW,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACmB,cAAc,EAAEC,iBAAiB,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACqB,OAAO,EAAEC,UAAU,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACuB,YAAY,EAAEC,eAAe,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM;IAAEyB;EAAS,CAAC,GAAGxB,UAAU,CAACG,YAAY,CAAC;EAE7C,MAAM,CAACsB,IAAI,EAAEC,QAAQ,CAAC,GAAGxB,WAAW,CAAC,CAACa,QAAQ,EAAEJ,QAAQ,MAAM;IAC1DgB,GAAG,EAAE,QAAQ;IACbC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAE;MAAEtB,KAAK,EAAEQ,QAAQ;MAAEJ;IAAS;EACtC,CAAC,CAAC,CAAC;EAEHV,SAAS,CAAC,MAAM;IACZ,IAAIwB,IAAI,IAAIA,IAAI,CAACI,IAAI,EAAE;MACnBR,UAAU,CAAC,IAAI,CAAC;MAChBE,eAAe,CAAC,EAAE,CAAC;MACnBC,QAAQ,CAAC;QAAEM,IAAI,EAAE,UAAU;QAAEf,QAAQ,EAAEU,IAAI,CAACI,IAAI,CAACtB;MAAM,CAAC,CAAC;IAC7D;EACJ,CAAC,EAAE,CAACkB,IAAI,CAAC,CAAC;EAEV,MAAMM,YAAY,GAAGC,CAAC,IAAI;IACtBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAAC3B,YAAY,CAACS,QAAQ,CAAC,EAAE;MAC3BQ,eAAe,CAAC,sBAAsB,CAAC;MACvC;IACF;IACA,IAAI,CAACb,eAAe,CAACC,QAAQ,CAAC,EAAE;MAC9BY,eAAe,CAAC,wFAAwF,CAAC;MACzG;IACF;IACA,IAAIZ,QAAQ,KAAKO,cAAc,EAAE;MAC/BK,eAAe,CAAC,yBAAyB,CAAC;MAC1C;IACF;IACAA,eAAe,CAAC,EAAE,CAAC;IACnBG,QAAQ,CAACX,QAAQ,EAAEJ,QAAQ,CAAC;EAChC,CAAC;EAED,oBACIN,OAAA;IAAM6B,QAAQ,EAAEH,YAAa;IAAAI,QAAA,GACxBf,OAAO,iBAAIf,OAAA;MAAG+B,SAAS,EAAC,iBAAiB;MAAAD,QAAA,EAAC;IAAuC;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EACrFlB,YAAY,iBAAIjB,OAAA;MAAG+B,SAAS,EAAC,eAAe;MAAAD,QAAA,EAAEb;IAAY;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAChEnC,OAAA;MAAOoC,OAAO,EAAC,mBAAmB;MAAAN,QAAA,EAAC;IAAS;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACpDnC,OAAA;MAAOyB,IAAI,EAAC,MAAM;MAACY,KAAK,EAAE3B,QAAS;MAAC4B,QAAQ,EAAEX,CAAC,IAAIhB,WAAW,CAACgB,CAAC,CAACY,MAAM,CAACF,KAAK,CAAE;MAACG,IAAI,EAAC,mBAAmB;MAACC,EAAE,EAAC;IAAmB;MAAAT,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAClInC,OAAA;MAAOoC,OAAO,EAAC,mBAAmB;MAAAN,QAAA,EAAC;IAAS;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACpDnC,OAAA;MAAOyB,IAAI,EAAC,UAAU;MAACe,IAAI,EAAC,mBAAmB;MAACC,EAAE,EAAC,mBAAmB;MAACJ,KAAK,EAAE/B,QAAS;MACvFgC,QAAQ,EAAEX,CAAC,IAAIf,WAAW,CAACe,CAAC,CAACY,MAAM,CAACF,KAAK;IAAE;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC9CnC,OAAA;MAAOoC,OAAO,EAAC,0BAA0B;MAAAN,QAAA,EAAC;IAAgB;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eAClEnC,OAAA;MAAOyB,IAAI,EAAC,UAAU;MAACe,IAAI,EAAC,0BAA0B;MAACC,EAAE,EAAC,0BAA0B;MAACJ,KAAK,EAAExB,cAAe;MAC3GyB,QAAQ,EAAEX,CAAC,IAAIb,iBAAiB,CAACa,CAAC,CAACY,MAAM,CAACF,KAAK;IAAE;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpDnC,OAAA;MAAOyB,IAAI,EAAC,QAAQ;MAACY,KAAK,EAAC,UAAU;MAACK,QAAQ,EAAEhC,QAAQ,CAACiC,MAAM,KAAK,CAAC,IAAIrC,QAAQ,CAACqC,MAAM,KAAK,CAAC,IAAIrC,QAAQ,KAAKO;IAAe;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC/H,CAAC;AAEf;AAAC1B,EAAA,CAvDuBD,QAAQ;EAAA,QAQHX,WAAW;AAAA;AAAA+C,EAAA,GARhBpC,QAAQ;AAAA,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}