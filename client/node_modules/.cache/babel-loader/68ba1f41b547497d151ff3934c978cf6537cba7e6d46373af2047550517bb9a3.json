{"ast":null,"code":"import _slicedToArray from\"/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useEffect}from\"react\";import{StateContext}from\"../context\";import{useResource}from\"react-request-hook\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.baseURL='http://localhost:4000';export default function Register(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),passwordRepeat=_useState6[0],setPasswordRepeat=_useState6[1];var _useContext=useContext(StateContext),dispatch=_useContext.dispatch;// Resource hook for registration\n// Updated to match the backend API endpoint and data structure\nvar _useResource=useResource(function(_ref){var username=_ref.username,password=_ref.password,passwordRepeat=_ref.passwordRepeat;return{url:'/auth/register',method:'post',data:{username:username,password:password,passwordConfirmation:passwordRepeat}};}),_useResource2=_slicedToArray(_useResource,2),user=_useResource2[0],register=_useResource2[1];// Effect hook for successful registration\nuseEffect(function(){if(user!==null&&user!==void 0&&user.data){// Handle the response data as per your backend's response structure\ndispatch({type:'REGISTER',username:user.data.username});}},[user,dispatch]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(!/\\S+@\\S+\\.\\S+/.test(username)){alert(\"Invalid email format\");return;}if(password!==passwordRepeat){alert(\"Passwords do not match\");return;}// Call the register function with the username, password, and passwordRepeat\nregister({username:username,password:password,passwordRepeat:passwordRepeat});};// JSX for the registration form\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"Register\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:username,onChange:function onChange(e){return setUsername(e.target.value);},name:\"register-username\",id:\"register-username\",placeholder:\"Email\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},name:\"register-password\",id:\"register-password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:passwordRepeat,onChange:function onChange(e){return setPasswordRepeat(e.target.value);},name:\"register-password-repeat\",id:\"register-password-repeat\",placeholder:\"Repeat Password\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-success\",value:\"Register\"})]})})]})})})});}","map":{"version":3,"names":["React","useState","useContext","useEffect","StateContext","useResource","axios","jsx","_jsx","jsxs","_jsxs","defaults","baseURL","Register","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","passwordRepeat","setPasswordRepeat","_useContext","dispatch","_useResource","_ref","url","method","data","passwordConfirmation","_useResource2","user","register","type","handleSubmit","e","preventDefault","test","alert","className","children","onSubmit","value","onChange","target","name","id","placeholder"],"sources":["/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/src/User/Register.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { StateContext } from \"../context\";\nimport { useResource } from \"react-request-hook\";\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'http://localhost:4000';\n\nexport default function Register() {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordRepeat, setPasswordRepeat] = useState(\"\");\n  const { dispatch } = useContext(StateContext);\n\n  // Resource hook for registration\n  // Updated to match the backend API endpoint and data structure\n  const [user, register] = useResource(({ username, password, passwordRepeat }) => ({\n    url: '/auth/register',\n    method: 'post',\n    data: { username, password, passwordConfirmation: passwordRepeat }\n  }));\n\n  // Effect hook for successful registration\n  useEffect(() => {\n    if (user?.data) {\n      // Handle the response data as per your backend's response structure\n      dispatch({ type: 'REGISTER', username: user.data.username });\n    }\n  }, [user, dispatch]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!/\\S+@\\S+\\.\\S+/.test(username)) {\n      alert(\"Invalid email format\");\n      return;\n    }\n    if (password !== passwordRepeat) {\n      alert(\"Passwords do not match\");\n      return;\n    }\n    // Call the register function with the username, password, and passwordRepeat\n    register({ username, password, passwordRepeat });\n  };\n\n  // JSX for the registration form\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"card\">\n            <div className=\"card-header\">Register</div>\n            <div className=\"card-body\">\n              <form onSubmit={handleSubmit}>\n                {/* Form fields for registration */}\n                <div className=\"form-group\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    value={username}\n                    onChange={(e) => setUsername(e.target.value)}\n                    name=\"register-username\"\n                    id=\"register-username\"\n                    placeholder=\"Email\"\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    name=\"register-password\"\n                    id=\"register-password\"\n                    placeholder=\"Password\"\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    value={passwordRepeat}\n                    onChange={(e) => setPasswordRepeat(e.target.value)}\n                    name=\"register-password-repeat\"\n                    id=\"register-password-repeat\"\n                    placeholder=\"Repeat Password\"\n                  />\n                </div>\n                <input type=\"submit\" className=\"btn btn-success\" value=\"Register\" />\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}