{"ast":null,"code":"import _objectSpread from\"/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from'react';import{useResource}from'react-request-hook';import{StateContext}from'../context';// Component for creating new todo items\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TodoCreator(){// State for input fields\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),todoTitle=_useState2[0],setTodoTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),todoDescription=_useState4[0],setTodoDescription=_useState4[1];// Accessing the global state and dispatch function from context\nvar _useContext=useContext(StateContext),state=_useContext.state,dispatch=_useContext.dispatch;var user=state.user;// Standard ISO format date for todo creation\nvar creationDate=new Date().toISOString();// Resource hook for creating todo items\nvar _useResource=useResource(function(todoDetails){return{url:'/toDo',method:'post',headers:{// Include the token in the Authorization header\nAuthorization:localStorage.getItem('token')},data:todoDetails};}),_useResource2=_slicedToArray(_useResource,2),todoResource=_useResource2[0],createNewTodo=_useResource2[1];// Event handler for form submission\nvar handleCreateTodo=function handleCreateTodo(event){event.preventDefault();createNewTodo({title:todoTitle,description:todoDescription,author:user,dateCreated:creationDate,complete:false,dateCompleted:null});};// Effect to reset form and dispatch action when a new todo is created\nuseEffect(function(){if(todoResource!==null&&todoResource!==void 0&&todoResource.data){console.log('New Todo Created:',todoResource.data);dispatch(_objectSpread({type:'CREATE_TODO'},todoResource.data));setTodoTitle('');setTodoDescription('');}},[todoResource===null||todoResource===void 0?void 0:todoResource.data,dispatch]);// Form for new todo creation\nreturn/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateTodo,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Author: \",/*#__PURE__*/_jsx(\"b\",{children:user})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"create-title\",children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"create-title\",id:\"create-title\",value:todoTitle,onChange:function onChange(e){return setTodoTitle(e.target.value);}})]}),/*#__PURE__*/_jsx(\"textarea\",{value:todoDescription,onChange:function onChange(e){return setTodoDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Create\"})]});}","map":{"version":3,"names":["useState","useContext","useEffect","useResource","StateContext","jsx","_jsx","jsxs","_jsxs","TodoCreator","_useState","_useState2","_slicedToArray","todoTitle","setTodoTitle","_useState3","_useState4","todoDescription","setTodoDescription","_useContext","state","dispatch","user","creationDate","Date","toISOString","_useResource","todoDetails","url","method","headers","Authorization","localStorage","getItem","data","_useResource2","todoResource","createNewTodo","handleCreateTodo","event","preventDefault","title","description","author","dateCreated","complete","dateCompleted","console","log","_objectSpread","type","onSubmit","children","htmlFor","name","id","value","onChange","e","target"],"sources":["/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/src/Todos/CreateTodo.js"],"sourcesContent":["import { useState, useContext, useEffect } from 'react';\nimport { useResource } from 'react-request-hook';\nimport { StateContext } from '../context';\n\n// Component for creating new todo items\nexport default function TodoCreator() {\n  // State for input fields\n  const [todoTitle, setTodoTitle] = useState('');\n  const [todoDescription, setTodoDescription] = useState('');\n\n  // Accessing the global state and dispatch function from context\n  const { state, dispatch } = useContext(StateContext);\n  const { user } = state;\n  \n  // Standard ISO format date for todo creation\n  const creationDate = new Date().toISOString();\n\n// Resource hook for creating todo items\nconst [todoResource, createNewTodo] = useResource((todoDetails) => ({\n  url: '/toDo', \n  method: 'post',\n  headers: {\n    // Include the token in the Authorization header\n    Authorization: localStorage.getItem('token')\n  },\n  data: todoDetails,\n}));\n\n  // Event handler for form submission\n  const handleCreateTodo = (event) => {\n    event.preventDefault();\n    createNewTodo({\n      title: todoTitle,\n      description: todoDescription,\n      author: user,\n      dateCreated: creationDate,\n      complete: false,\n      dateCompleted: null,\n    });\n  };\n\n  // Effect to reset form and dispatch action when a new todo is created\n  useEffect(() => {\n    if (todoResource?.data) {\n      console.log('New Todo Created:', todoResource.data);\n      dispatch({ type: 'CREATE_TODO', ...todoResource.data });\n      setTodoTitle('');\n      setTodoDescription('');\n    }\n  }, [todoResource?.data, dispatch]);\n\n  // Form for new todo creation\n  return (\n    <form onSubmit={handleCreateTodo}>\n      <div>\n        Author: <b>{user}</b>\n      </div>\n      <div>\n        <label htmlFor=\"create-title\">Title:</label>\n        <input\n          type=\"text\"\n          name=\"create-title\"\n          id=\"create-title\"\n          value={todoTitle}\n          onChange={(e) => setTodoTitle(e.target.value)}\n        />\n      </div>\n      <textarea\n        value={todoDescription}\n        onChange={(e) => setTodoDescription(e.target.value)}\n      />\n      <input type=\"submit\" value=\"Create\" />\n    </form>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}