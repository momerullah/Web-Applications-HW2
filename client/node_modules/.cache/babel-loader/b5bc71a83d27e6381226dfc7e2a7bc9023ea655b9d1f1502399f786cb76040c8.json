{"ast":null,"code":"import _slicedToArray from\"/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{StateContext}from\"../context\";import{useResource}from\"react-request-hook\";// Component for handling user login\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){// State hooks for managing form inputs\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];// Accessing the global state\nvar _useContext=useContext(StateContext),dispatch=_useContext.dispatch;// Resource hook for login action\nvar _useResource=useResource(function(user,pwd){return{url:\"/login\",method:\"post\",data:{email:user,password:pwd}};}),_useResource2=_slicedToArray(_useResource,2),user=_useResource2[0],login=_useResource2[1];// Effect hook to handle user state changes\nuseEffect(function(){var _user$data;if(user!==null&&user!==void 0&&(_user$data=user.data)!==null&&_user$data!==void 0&&_user$data.user){dispatch({type:\"LOGIN\",username:user.data.user.email});}},[user,dispatch]);// Form submission handler\nvar handleSubmit=function handleSubmit(e){e.preventDefault();// Basic email format validation\nif(!/\\S+@\\S+\\.\\S+/.test(username)){alert(\"Invalid email format\");return;}login(username,password);};// JSX for rendering the login form\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:username,onChange:function onChange(e){return setUsername(e.target.value);},name:\"login-username\",id:\"login-username\",placeholder:\"Email\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},name:\"login-password\",id:\"login-password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-primary\",value:\"Login\"})]})})]})})})});}","map":{"version":3,"names":["React","useState","useEffect","useContext","StateContext","useResource","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useContext","dispatch","_useResource","user","pwd","url","method","data","email","_useResource2","login","_user$data","type","handleSubmit","e","preventDefault","test","alert","className","children","onSubmit","value","onChange","target","name","id","placeholder"],"sources":["/Users/cdmstudent/Documents/GitHub/Web-Applications-HW2-main/client/src/User/Login.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { StateContext } from \"../context\";\nimport { useResource } from \"react-request-hook\";\n\n// Component for handling user login\nexport default function Login() {\n  // State hooks for managing form inputs\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  // Accessing the global state\n  const { dispatch } = useContext(StateContext);\n\n  // Resource hook for login action\n  const [user, login] = useResource((user, pwd) => ({\n    url: \"/login\",\n    method: \"post\",\n    data: { email: user, password: pwd },\n  }));\n\n  // Effect hook to handle user state changes\n  useEffect(() => {\n    if (user?.data?.user) {\n      dispatch({ type: \"LOGIN\", username: user.data.user.email });\n    }\n  }, [user, dispatch]);\n\n  // Form submission handler\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // Basic email format validation\n    if (!/\\S+@\\S+\\.\\S+/.test(username)) {\n      alert(\"Invalid email format\");\n      return;\n    }\n    login(username, password);\n  };\n\n  // JSX for rendering the login form\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"card\">\n            <div className=\"card-header\">Login</div>\n            <div className=\"card-body\">\n              <form onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    value={username}\n                    onChange={(e) => setUsername(e.target.value)}\n                    name=\"login-username\"\n                    id=\"login-username\"\n                    placeholder=\"Email\"\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    name=\"login-password\"\n                    id=\"login-password\"\n                    placeholder=\"Password\"\n                  />\n                </div>\n                <input type=\"submit\" className=\"btn btn-primary\" value=\"Login\" />\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}